//***********************ROTATOR*************************
//*******FXML********
<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Point3D?>
<?import javafx.scene.control.Slider?>
<?import javafx.scene.layout.AnchorPane?>
<?import javafx.scene.shape.Rectangle?>
<?import javafx.scene.text.Font?>
<?import javafx.scene.text.Text?>

<AnchorPane maxHeight="-Infinity" maxWidth="-Infinity" minHeight="-Infinity" minWidth="-Infinity" prefHeight="488.0" prefWidth="530.0" xmlns="http://javafx.com/javafx/21" xmlns:fx="http://javafx.com/fxml/1" fx:controller="com.example.box_rotation.HelloController">
   <children>
      <Rectangle fx:id="kostka" arcHeight="5.0" arcWidth="5.0" fill="#ff1f1f" height="200.0" layoutX="200.0" layoutY="31.0" stroke="BLACK" strokeType="INSIDE" width="200.0" AnchorPane.leftAnchor="165.0" AnchorPane.rightAnchor="165.0" AnchorPane.topAnchor="100.0">
         <rotationAxis>
            <Point3D />
         </rotationAxis>
      </Rectangle>
      <Slider fx:id="rotator" layoutX="37.0" layoutY="295.0" max="360.0" prefHeight="24.0" prefWidth="531.0" AnchorPane.bottomAnchor="80.0" AnchorPane.leftAnchor="25.0" AnchorPane.rightAnchor="25.0" />
      <Text fx:id="uhel" layoutX="214.0" layoutY="454.0" strokeType="OUTSIDE" strokeWidth="0.0" text="0 deg" AnchorPane.bottomAnchor="30.0">
         <font>
            <Font name="Bauhaus 93" size="40.0" />
         </font>
      </Text>
   </children>
</AnchorPane>


//*******CON********
package com.example.box_rotation;

import javafx.fxml.FXML;
import javafx.fxml.Initializable;
import javafx.scene.control.Slider;
import javafx.scene.shape.Rectangle;
import javafx.scene.text.Text;
import javafx.scene.transform.Rotate;


import java.net.URL;
import java.util.ResourceBundle;

public class HelloController implements Initializable {

    @FXML
    private Rectangle kostka;

    @FXML
    private Slider rotator;

    private Rotate rotateTransform;

    private double centerX, centerY;

    @FXML
    private Text uhel;


    @Override
    public void initialize(URL url, ResourceBundle resourceBundle) {
        // Získání středu kostky
        centerX = kostka.getX() + kostka.getWidth() / 2;
        centerY = kostka.getY() + kostka.getHeight() / 2;

        // Vytvoření transformace Rotate s umístěním středu otáčení v prostředku kostky
        rotateTransform = new Rotate();
        rotateTransform.setPivotX(centerX);
        rotateTransform.setPivotY(centerY);

        // Přidání transformace na kostku
        kostka.getTransforms().add(rotateTransform);


        // Nastavení listeneru na změnu hodnoty slideru
        rotator.valueProperty().addListener((observable, oldValue, newValue) -> {
            rotateTransform.setAngle(newValue.doubleValue());
            uhel.setText(String.format("%.0f deg", newValue));
        });

        // Nastavení kroků slideru
        rotator.setMajorTickUnit(45); // Každých 45 stupňů
        rotator.setMinorTickCount(4); // Malé čárky mezi velkými
        rotator.setSnapToTicks(true); // Zamagnetuje na kroky slideru
        rotator.setShowTickMarks(true); // Zobrazí čárové značky


    }
}


